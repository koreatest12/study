name: Update Study Blog README

on:
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ìœ¼ë¡œ README ì—…ë°ì´íŠ¸ (ë‚´ìš© ë³€ê²½ ì‹œ ìœ ìš©)
  push:
    paths:
      - 'reports/**' # ë¦¬í¬íŠ¸ í´ë”ì— ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œë„ ì—…ë°ì´íŠ¸ (ì„ íƒ ì‚¬í•­)

permissions:
  contents: write

jobs:
  update-readme:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Generate README.md
        run: |
          # README.md íŒŒì¼ ìƒì„± ì‹œì‘
          cat <<EOF > README.md
          # ğŸ›¡ï¸ ì •ë³´ë³´ì•ˆê¸°ì‚¬ ìŠ¤í„°ë”” (Information Security Engineer)

          ![Study Status](https://img.shields.io/badge/Study-In%20Progress-blue?style=for-the-badge&logo=gitbook)
          ![Last Updated](https://img.shields.io/badge/Last%20Update-$(date +'%Y--%m--%d')-green?style=for-the-badge)

          ì´ ë¦¬í¬ì§€í† ë¦¬ëŠ” ì •ë³´ë³´ì•ˆê¸°ì‚¬ ìê²©ì¦ ì·¨ë“ì„ ìœ„í•œ í•™ìŠµ ë‚´ìš©ê³¼ ìë™ ìƒì„±ëœ ë³´ê³ ì„œë¥¼ ê¸°ë¡í•˜ëŠ” ìŠ¤í„°ë”” ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.
          GitHub Actionsë¥¼ í†µí•´ í•™ìŠµ ìš”ì•½ ë³´ê³ ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.

          ---

          ## ğŸ“š í•™ìŠµ ì»¤ë¦¬í˜ëŸ¼ ë° í•µì‹¬ ë‚´ìš©
          ì •ë³´ë³´ì•ˆê¸°ì‚¬ í•„ê¸°/ì‹¤ê¸° ëŒ€ë¹„ë¥¼ ìœ„í•œ 5ëŒ€ í•µì‹¬ ì˜ì—­ì…ë‹ˆë‹¤.

          ### 1ï¸âƒ£ ì‹œìŠ¤í…œ ë³´ì•ˆ (System Security)
          ìš´ì˜ì²´ì œ ì „ë°˜ì˜ êµ¬ì¡°ì™€ ë³´ì•ˆ ì„¤ì •, ë¡œê·¸ ë¶„ì„ì„ ë‹¤ë£¹ë‹ˆë‹¤.
          - **ìš´ì˜ì²´ì œ êµ¬ì¡°:** CPU/ë©”ëª¨ë¦¬ ê´€ë¦¬, í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§, êµì°©ìƒíƒœ(Deadlock)
          - **í´ë¼ì´ì–¸íŠ¸ ë³´ì•ˆ:** ìœˆë„ìš° ë ˆì§€ìŠ¤íŠ¸ë¦¬, ì•…ì„±ì½”ë“œ(ë°”ì´ëŸ¬ìŠ¤/ëœì„¬ì›¨ì–´) ë¶„ì„ ë° ëŒ€ì‘
          - **ì„œë²„ ë³´ì•ˆ (Linux/Unix/Windows):** ê³„ì • ê´€ë¦¬(/etc/passwd), ê¶Œí•œ ê´€ë¦¬(chmod/umask), ì„œë¹„ìŠ¤ ë³´ì•ˆ
          - **ë¡œê·¸ ë¶„ì„ ë° ì¹¨í•´ëŒ€ì‘:** Syslog, wtmp/utmp, Windows ì´ë²¤íŠ¸ ë¡œê·¸, ì¹¨í•´ì‚¬ê³  ëŒ€ì‘ ì ˆì°¨

          ### 2ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ (Network Security)
          ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œì˜ ì·¨ì•½ì ê³¼ ë³´ì•ˆ ì¥ë¹„ í™œìš©ì„ í•™ìŠµí•©ë‹ˆë‹¤.
          - **ë„¤íŠ¸ì›Œí¬ ì¼ë°˜:** OSI 7ê³„ì¸µ, TCP/IP(ARP, ICMP, TCP, UDP) í—¤ë” êµ¬ì¡°
          - **ë„¤íŠ¸ì›Œí¬ ê³µê²©:** DoS/DDoS, Spoofing, Sniffing, Session Hijacking
          - **ë³´ì•ˆ ì¥ë¹„:** ë°©í™”ë²½(F/W), IDS/IPS, VPN(IPSec/SSL), NAC
          - **ë¬´ì„  ë³´ì•ˆ:** WEP, WPA/WPA2, 802.1x ì¸ì¦

          ### 3ï¸âƒ£ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ (Application Security)
          ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì·¨ì•½ì ì„ ë¶„ì„í•©ë‹ˆë‹¤.
          - **ì›¹ ë³´ì•ˆ:** HTTP í”„ë¡œí† ì½œ, OWASP Top 10 (SQL Injection, XSS, CSRF, íŒŒì¼ ì—…ë¡œë“œ)
          - **DB ë³´ì•ˆ:** ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼í†µì œ, ë¬´ê²°ì„±, ì•”í˜¸í™”
          - **ì „ììƒê±°ë˜:** SET, SSL/TLS, ì „ìí™”í ë³´ì•ˆ í”„ë¡œí† ì½œ

          ### 4ï¸âƒ£ ì •ë³´ë³´ì•ˆ ì¼ë°˜ (Security General)
          ì•”í˜¸í•™ ì´ë¡ ê³¼ ì ‘ê·¼ í†µì œ ì‹œìŠ¤í…œì„ ì´í•´í•©ë‹ˆë‹¤.
          - **ë³´ì•ˆ ê°œìš”:** ê¸°ë°€ì„±, ë¬´ê²°ì„±, ê°€ìš©ì„± (CIA Triad)
          - **ì•”í˜¸í•™:** ëŒ€ì¹­í‚¤(AES/DES), ê³µê°œí‚¤(RSA/ECC), í•´ì‹œí•¨ìˆ˜(SHA-256), ì „ìì„œëª…, PKI
          - **ì ‘ê·¼ í†µì œ:** ì‹ë³„/ì¸ì¦/ì¸ê°€, MAC, DAC, RBAC, ì‚¬ìš©ì ì¸ì¦(OTP, ìƒì²´ì¸ì‹)

          ### 5ï¸âƒ£ ì •ë³´ë³´ì•ˆ ê´€ë¦¬ ë° ë²•ê·œ (Management & Law)
          ì •ë³´ë³´í˜¸ ê´€ë¦¬ì²´ê³„ì™€ ê´€ë ¨ ë²•ê·œë¥¼ ìˆ™ì§€í•©ë‹ˆë‹¤.
          - **ê´€ë¦¬ì²´ê³„:** ISMS-P ì¸ì¦ ê¸°ì¤€, ìœ„í—˜ ê´€ë¦¬(Risk Management), BCP/DRP
          - **ê´€ë ¨ ë²•ê·œ:** ì •ë³´í†µì‹ ë§ë²•, ê°œì¸ì •ë³´ë³´í˜¸ë²•, ì •ë³´í†µì‹ ê¸°ë°˜ë³´í˜¸ë²•, ì „ìì„œëª…ë²•

          ---

          ## ğŸ“‚ í•™ìŠµ ë¦¬í¬íŠ¸ (Reports)
          ìë™ ìƒì„±ëœ í•™ìŠµ ë³´ê³ ì„œ ëª©ë¡ì…ë‹ˆë‹¤. \`reports/\` í´ë”ì— ì €ì¥ë©ë‹ˆë‹¤.

          | ë‚ ì§œ | ë³´ê³ ì„œ íŒŒì¼ | ë¹„ê³  |
          |:---:|:---|:---|
          EOF

          # reports í´ë” ë‚´ì˜ md íŒŒì¼ë“¤ì„ ì°¾ì•„ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ (ìµœì‹ ìˆœ)
          if [ -d "reports" ]; then
            ls -1t reports/*.md | while read filepath; do
              filename=$(basename "\$filepath")
              dateStr=$(echo \$filename | grep -oE '[0-9]{4}-[0-9]{2}-[0-9]{2}')
              echo "| \$dateStr | [\$filename](\$filepath) | ìë™ ìƒì„±ë¨ |" >> README.md
            done
          else
            echo "| - | ì•„ì§ ìƒì„±ëœ ë³´ê³ ì„œê°€ ì—†ìŠµë‹ˆë‹¤. | Workflowë¥¼ ì‹¤í–‰í•˜ì„¸ìš”. |" >> README.md
          fi

          cat <<EOF >> README.md

          ---
          ## ğŸš€ How to Use (Workflow)
          1. **ë³´ê³ ì„œ ìƒì„±:** Actions íƒ­ì—ì„œ \`Generate Security Engineer Report\` ì‹¤í–‰
          2. **README ì—…ë°ì´íŠ¸:** Actions íƒ­ì—ì„œ \`Update Study Blog README\` ì‹¤í–‰ (ë˜ëŠ” ë¦¬í¬íŠ¸ ìƒì„± ì‹œ ìë™ ë°˜ì˜ ê°€ëŠ¥)

          > *This README was automatically generated by GitHub Actions.*
          EOF

      - name: Commit and Push README
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          # ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œë§Œ ì»¤ë°‹
          git add README.md
          if git diff --staged --quiet; then
            echo "No changes to commit"
          else
            git commit -m "Update README.md for Study Blog"
            git push
          fi
