# 🚦 세마포어(Semaphore) 심층 분석 및 기출 예상

**작성일:** 2025-12-06
**주제:** 운영체제 동기화 기법 - 세마포어

---

## 1. 세마포어(Semaphore) 핵심 이론

### 1.1 정의
세마포어는 **에츠허르 다익스트라(Edsger Dijkstra)**가 고안한 동기화 도구로, 멀티프로그래밍 환경에서 **공유 자원(Shared Resource)**에 대한 접근을 제어하기 위한 정수형 변수(S)입니다.

### 1.2 동작 원리 (P-V 연산)
세마포어는 오직 다음 두 가지 원자적(Atomic) 연산을 통해서만 접근 가능합니다.

* **P 연산 (Wait/Down):** 자원 요청
    - `S`를 1 감소시킵니다.
    - 결과가 0보다 작으면 프로세스는 자원이 생길 때까지 **대기(Block)**합니다.
    ```c
    P(S):
      S = S - 1;
      if (S < 0) block();
    ```

* **V 연산 (Signal/Up):** 자원 반납
    - `S`를 1 증가시킵니다.
    - 대기 중인 프로세스가 있다면 하나를 **깨웁니다(Wake-up)**.
    ```c
    V(S):
      S = S + 1;
      if (S <= 0) wakeup(P);
    ```

### 1.3 세마포어 vs 뮤텍스 (Mutex)
| 구분 | 세마포어 (Semaphore) | 뮤텍스 (Mutex) |
|:---:|:---|:---|
| **소유권** | 없음 (누구나 해제 가능) | 있음 (Lock 건 스레드만 해제 가능) |
| **값의 범위** | 0 이상 (카운팅 가능) | 0 또는 1 (이진) |
| **목적** | 자원 관리, 순서 제어 | 상호 배제 (Locking) |

---

## 2. 정보보안기사 예상 문제 (필기/실기)

### Q1. 레이스 컨디션(Race Condition) 방어
**문제:** 검사 시점(Check)과 사용 시점(Use)의 불일치로 발생하는 TOCTOU 취약점을 해결하기 위한 근본적인 대책은?
**정답:** 해당 코드 블록을 **임계 영역(Critical Section)**으로 설정하고, 세마포어나 뮤텍스를 사용하여 **원자성(Atomicity)**을 보장해야 한다.

### Q2. 교착상태(Deadlock)와의 관계
**문제:** 세마포어를 잘못 사용하여 두 프로세스가 서로의 자원 해제를 무한히 기다리는 상태는?
**정답:** 교착상태 (Deadlock)

### Q3. P/V 연산의 의미
**문제:** 카운팅 세마포어의 초기값이 3일 때, 5개의 프로세스가 동시에 P연산을 수행하면 몇 개의 프로세스가 대기 상태가 되는가?
**정답:** 2개
> **풀이:** 자원(3개) - 요청(5개) = -2. 음수값이므로 2개의 프로세스는 자원을 얻지 못하고 Block 된다.

---
> *Auto-generated by GitHub Actions*
